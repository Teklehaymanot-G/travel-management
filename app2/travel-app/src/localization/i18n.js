import i18n from "i18next";
import { initReactI18next } from "react-i18next";
import { Platform } from "react-native";
let languageDetector;
if (Platform.OS !== "web") {
  const AsyncStorage =
    require("@react-native-async-storage/async-storage").default;
  languageDetector = {
    type: "languageDetector",
    async: true,
    detect: async (callback) => {
      try {
        const savedLanguage = await AsyncStorage.getItem("user-language");
        callback(savedLanguage || "en");
      } catch (error) {
        callback("en");
      }
    },
    init: () => {},
    cacheUserLanguage: async (lng) => {
      try {
        await AsyncStorage.setItem("user-language", lng);
      } catch (error) {
        console.error("Error saving language", error);
      }
    },
  };
}

// Translation resources
const resources = {
  en: {
    translation: {
      welcome: "Welcome to TravelEase",
      sign_in: "Sign in with your phone number",
      phone_number: "Phone Number",
      continue: "Continue",
      terms:
        "By continuing, you agree to our Terms of Service and Privacy Policy",
      verify_phone: "Verify Your Phone",
      enter_code: "Enter the 6-digit code sent to",
      verify: "Verify",
      resend_code: "Resend OTP",
      resend_in: "Resend code in",
      didnt_receive: "Didn't receive the code?",
      discover: "Discover Your Next Adventure",
      all: "All",
      upcoming: "Upcoming",
      active: "Active",
      completed: "Completed",
      book_trip: "Book Your Trip",
      travelers: "Travelers",
      traveler_count: "{{count}} Traveler",
      traveler_count_plural: "{{count}} Travelers",
      name: "Name",
      age: "Age",
      continue_payment: "Continue to Payment",
      trip_price: "Trip Price",
      taxes_fees: "Taxes & Fees",
      total: "Total",
      my_tickets: "My Tickets",
      no_tickets: "No tickets yet",
      book_first: "Book your first adventure to get started",
      explore_travels: "Explore Travels",
      travel_ticket: "Travel Ticket",
      tap_details: "Tap for details",
      profile: "Profile",
      language: "Language",
      logout: "Logout",
      english: "English",
      amharic: "Amharic",
      change_language: "Change Language",
      save: "Save",
      cancel: "Cancel",

      booking_confirmed: "Booking Confirmed!",
      confirmation_message: "Your booking for {{title}} is confirmed",
      booking_details: "Booking Details",
      travelers_list: "Travelers",
      view_tickets: "View My Tickets",
      view_travel_details: "View Travel Details",
      travel: "Travel",
      dates: "Dates",
      total_price: "Total Price",
      comment_question: "What time does the tour start on the first day?",
      comment_answer: "The tour starts at 9:00 AM at the hotel lobby.",
      write_comment: "Write your comment...",
      send: "Send",
      no_comments: "No comments yet",
      be_first_comment: "Be the first to comment",
      itinerary: "Itinerary",
      hotel_info: "Hotel Information",
      travel_insurance: "Travel Insurance",
      visa_requirements: "Visa Requirements",
      downloading: "Downloading",
      important_info: "Important Information",
      document_info:
        "Please download and print all required documents before your travel date. Some documents may need to be presented at immigration or hotel check-in.",
      description: "Description",
      multiple_destinations: "Multiple Destinations",
      requirements: "Requirements",
      view_comments: "View Comments",
      view_documents: "View Documents",
      book_now: "Book Now",
      per_person: "per person",

      we_will_send_otp: "We will send a verification code to",
      enter_phone_number: "Enter your phone",

      welcome_to_travelbus: "Welcome",
      sign_in_with_phone: "Sign in with your phone number",
      send_verification_code: "Send Verification Code",
      by_continuing_you_agree: "By continuing, you agree to our",
      terms_of_service: "Terms of Service",
      and: "and",
      privacy_policy: "Privacy Policy",
      select_country: "Select Country",
      invalid_phone: "Invalid Phone Number",
      please_enter_valid_phone: "Please enter a valid phone number",
      error: "Error",
      failed_to_send_otp: "Failed to send verification code. Please try again.",
      ok: "OK",
      secure_verification: "Secure phone verification",
      instant_otp: "Instant OTP delivery",
      easy_booking: "Easy bus booking",
      need_help: "Need help?",
      contact_support: "Contact Support",

      login: "Login",
      register: "Register",
      email: "Email",
      password: "Password",
      confirm_password: "Confirm Password",
      full_name: "Full Name",
      already_have_account: "Already have an account?",
      dont_have_account: "Don't have an account?",
      or: "or",
      continue_with_google: "Continue with Google",
      continue_with_apple: "Continue with Apple",

      verify_your_phone: "Verify Your Phone",
      enter_verification_code_sent_to: "Enter the 6-digit code sent to",
      resend_otp: "Resend OTP",
      didnt_receive_code: "Didn't receive the code?",
      invalid_otp: "Invalid OTP",
      please_enter_6_digit_otp: "Please enter a 6-digit verification code",
      invalid_otp_please_try_again: "Invalid OTP. Please try again.",
      verification_successful: "Verification successful!",
      otp_resent: "OTP Resent",
      new_otp_sent_successfully: "New OTP sent successfully",
      failed_to_resend_otp: "Failed to resend OTP",
      having_trouble: "Having trouble?",
      check_your_network: "• Check your network connection",
      make_sure_correct_number:
        "• Make sure you entered the correct phone number",
      success: "Success",

      create_account: "Create Account",
      join_travelease_community: "Join the TravelEase community",
      enter_full_name: "Enter your full name",
      enter_email: "Enter your email address",
      we_will_send_otp_verification: "We'll send an OTP for verification",
      incomplete_info: "Incomplete Information",
      please_fill_all_fields: "Please fill in all fields",
      registration_successful: "Registration Successful",
      account_created_successfully:
        "Your account has been created successfully",

      // My Tickets
      manage_your_bookings: "Manage your bookings and trips",
      confirmed: "Confirmed",
      no_tickets_found: "No tickets found",
      book_your_first_adventure: "Book your first adventure to get started",
      view_details: "View Details",

      // Profile
      guest_user: "Guest User",
      not_logged_in: "Not logged in",
      account_settings: "Account Settings",
      edit_profile: "Edit Profile",
      notifications: "Notifications",
      payment_methods: "Payment Methods",
      help_support: "Help & Support",
      about_app: "About App",
      preferences: "Preferences",
      dark_mode: "Dark Mode",
      location_services: "Location Services",
      confirm_logout: "Confirm Logout",
      are_you_sure_logout: "Are you sure you want to logout?",
      all_rights_reserved: "All rights reserved",
      coming_soon: "Coming Soon",
      feature_coming_soon: "This feature is coming soon!",

      // Travel Detail
      travel_not_found: "Travel destination not found",
      reviews: "reviews",
      trip_highlights: "Trip Highlights",
      whats_included: "What's Included",
      important_notes: "Important Notes",
      booking_confirmation_note:
        "Booking confirmation will be sent within 24 hours",
      cancellation_policy_note:
        "Free cancellation up to 48 hours before travel",
      total_per_person: "total per person",

      // Booking
      number_of_travelers: "Number of Travelers",
      select_travel_date: "Select Travel Date",
      price_summary: "Price Summary",
      traveler: "traveler",
      payment_method: "Payment Method",
      credit_debit_card: "Credit/Debit Card",
      by_continuing_you_agree_terms:
        "By continuing, you agree to our Terms of Service and Privacy Policy",
      confirm_booking: "Confirm Booking",
      processing: "Processing...",
      select_date: "Select Date",
      please_select_travel_date: "Please select a travel date",
      authentication_required: "Authentication Required",
      please_login_to_continue: "Please login to continue with booking",
      booking_successful: "Booking Successful!",
      your_trip_has_been_booked: "Your trip has been successfully booked",

      discover_your_next_adventure: "Embark on a Sacred Journey",
      explore_amazing_destinations: "Walk in the footsteps of ancient faith",
      popular: "Popular",
      adventure: "Adventure",
      cultural: "Cultural",
      br: "ETB",
      bank_transfer: "Bank Transfer",
      bank_transfer_description: "Transfer to our bank account",
      card_payment_description: "Pay securely with your card",
      back_to_payment_methods: "Back to Payment Methods",
      bank_transfer_instructions: "Bank Transfer Instructions",
      bank_transfer_guide:
        "Please transfer the total amount to one of our bank accounts below. After making the payment, click the button below to upload your payment proof.",
      account_name: "Account Name",
      account_number: "Account Number",
      branch: "Branch",
      i_have_made_payment: "I Have Made the Payment",
      confirm_payment: "Confirm Payment",
      upload_payment_proof:
        "Please upload a screenshot or photo of your payment confirmation as proof of payment.",
      reference_number: "Reference Number",
      enter_reference_number: "Enter transaction reference number",
      amount_paid: "Amount Paid",
      enter_amount: "Enter amount paid",
      payment_screenshot: "Payment Screenshot",
      choose_from_gallery: "Choose from Gallery",
      take_photo: "Take Photo",
      submit_payment: "Submit Payment",
      payment_pending: "Payment Pending",
      payment_pending_description:
        "Your payment is being verified. We will confirm your booking once we verify the payment. This usually takes 1-2 business hours.",
      payment_proof: "Payment Proof",
      simulate_confirmation: "Simulate Confirmation (Demo)",
      payment_confirmed: "Payment Confirmed!",
      payment_confirmed_description:
        "Your payment has been verified and your booking is now confirmed.",
      payment_received: "Payment received and verified",
      itinerary_sent: "Itinerary sent to your email",
    },
  },
  am: {
    translation: {
      welcome: "እንኳን በደህና መጡ",
      sign_in: "በስልክ ቁጥርዎ ይግቡ",
      phone_number: "ስልክ ቁጥር",
      continue: "ቀጥል",
      terms: "በመቀጠል የአገልግሎት ውል እና የግላዊነት ፖሊሲ ተቀባይ ነዎት።",
      verify_phone: "ስልክዎን ያረጋግጡ",
      enter_code: "ወደ የተላከው 6-አሃዝ ኮድ ያስገቡ",
      verify: "አረጋግጥ",
      resend_code: "OTP እንደገና ላክ",
      resend_in: "በ {{seconds}} ሰከንድ ውስጥ እንደገና ላክ",
      didnt_receive: "ኮዱ አልደረሰዎትም?",
      discover: "ቀጣዩን ልምምድዎን ያግኙ",
      all: "ሁሉም",
      upcoming: "የሚመጡ",
      active: "ንቁ",
      completed: "የተጠናቀቀ",
      book_trip: "ጉዞዎን ያቅዱ",
      travelers: "ጉዞ አድራጊዎች",
      traveler_count: "{{count}} ጉዞ አድራጊ",
      traveler_count_plural: "{{count}} ጉዞ አድራጊዎች",
      name: "ስም",
      age: "እድሜ",
      continue_payment: "ወደ ክፍያ ቀጥል",
      trip_price: "የጉዞ ዋጋ",
      taxes_fees: "ታክስ እና ክፍያዎች",
      total: "ጠቅላላ",
      my_tickets: "የእኔ ትኬቶች",
      no_tickets: "እስካሁን ትኬት የለም",
      book_first: "ለመጀመር የመጀመሪያዎን ልምምድ ያቅዱ",
      explore_travels: "ጉዞዎችን ያስሱ",
      travel_ticket: "የጉዞ ትኬት",
      tap_details: "ለዝርዝሮች ይንኩ",
      profile: "መገለጫ",
      language: "ቋንቋ",
      logout: "ውጣ",
      english: "እንግሊዝኛ",
      amharic: "አማርኛ",
      change_language: "ቋንቋ ቀይር",
      save: "አስቀምጥ",
      cancel: "ሰርዝ",

      booking_confirmed: "ቦኪንግ ተረጋግጧል!",
      confirmation_message: "ለ {{title}} የቦኪንግ ሂደትዎ ተረጋግጧል",
      booking_details: "የቦኪንግ ዝርዝሮች",
      travelers_list: "ጉዞ አድራጊዎች",
      view_tickets: "ትኬቶቼን ይመልከቱ",
      view_travel_details: "የጉዞ ዝርዝሮችን ይመልከቱ",
      travel: "ጉዞ",
      dates: "ቀኖች",
      total_price: "ጠቅላላ ዋጋ",
      comment_question: "በመጀመሪያው ቀን ጉዞው በምን ሰዓት ይጀምራል?",
      comment_answer: "ጉዞው በሆቴሉ ሊቢ በጠዋት 9፡00 ይጀምራል።",
      write_comment: "አስተያየትዎን ይጻፉ...",
      send: "ላክ",
      no_comments: "እስካሁን አስተያየት የለም",
      be_first_comment: "አስተያየት ለመስጠት የመጀመሪያዎቹ ይሁኑ",
      itinerary: "የጉዞ መርሃ ግብር",
      hotel_info: "የሆቴል መረጃ",
      travel_insurance: "የጉዞ ኢንሹራንስ",
      visa_requirements: "የቪዛ መስፈርቶች",
      downloading: "በማውረድ ላይ",
      important_info: "አስፈላጊ መረጃ",
      document_info:
        "ከጉዞ ቀንዎ በፊት ሁሉንም አስፈላጊ ሰነዶች አውርደው ያትሙ። አንዳንድ ሰነዶች በስደት ወይም በሆቴል ቼክ-ኢን ጊዜ ሊቀርቡ ይችላሉ።",
      description: "መግለጫ",
      multiple_destinations: "በርካታ መዳረሻዎች",
      requirements: "ማስፈልጊያዎች",
      view_comments: "አስተያየቶችን ይመልከቱ",
      view_documents: "ሰነዶችን ይመልከቱ",
      book_now: "አሁኑኑ ያቅዱ",
      per_person: "በአንድ ሰው",

      we_will_send_otp: "እርስዎን የሚያረጋግጥ ኮድ እናልክላችኋለን።",
      enter_phone_number: "ስልክ ቁጥርዎን ያስገቡ",

      welcome_to_travelbus: "እንኳን ወደ TravelBus በደህና መጡ",
      sign_in_with_phone: "በስልክ ቁጥርዎ ይግቡ",
      send_verification_code: "ማረጋገጫ ኮድ ይላኩ",
      by_continuing_you_agree: "በመቀጠል የኛን",
      terms_of_service: "የአገልግሎት ውሎች",
      and: "እና",
      privacy_policy: "የግላዊነት ፖሊሲ",
      select_country: "አገር ይምረጡ",
      invalid_phone: "ማለት የማይቻል ስልክ ቁጥር",
      please_enter_valid_phone: "እባክዎ ትክክለኛ ስልክ ቁጥር ያስገቡ",
      error: "ስህተት",
      failed_to_send_otp: "ማረጋገጫ ኮድ መላክ አልተሳካም። እባክዎ እንደገና ይሞክሩ።",
      ok: "እሺ",
      secure_verification: "ደህንነቱ የተጠበቀ ስልክ ማረጋገጫ",
      instant_otp: "ፈጣን OTP አቅርቦት",
      easy_booking: "ቀላል አጥር ቦኪንግ",
      need_help: "እርዳታ ይፈልጋሉ?",
      contact_support: "ድጋፍ ያግኙ",

      login: "ግባ",
      register: "ይመዝገቡ",
      email: "ኢሜይል",
      password: "የይለፍ ቃል",
      confirm_password: "የይለፍ ቃል አረጋግጥ",
      full_name: "ሙሉ ስም",
      already_have_account: "ቀድሞውኑ መለያ አለዎት?",
      dont_have_account: "መለያ የሎትም?",
      or: "ወይም",
      continue_with_google: "በGoogle ይቀጥሉ",
      continue_with_apple: "በApple ይቀጥሉ",

      verify_your_phone: "ስልክዎን ያረጋግጡ",
      enter_verification_code_sent_to: "ወደ የተላከው 6-አሃዝ ኮድ ያስገቡ",
      resend_otp: "OTP እንደገና ላክ",
      didnt_receive_code: "ኮዱ አልደረሰዎትም?",
      invalid_otp: "ማለት የማይቻል OTP",
      please_enter_6_digit_otp: "እባክዎ 6-አሃዝ ማረጋገጫ ኮድ ያስገቡ",
      invalid_otp_please_try_again: "ማለት የማይቻል OTP። እባክዎ እንደገና ይሞክሩ።",
      verification_successful: "ማረጋገጫ አልቋል!",
      otp_resent: "OTP እንደገና ተልኳል",
      new_otp_sent_successfully: "አዲስ OTP በተሳካ ሁኔታ ተልኳል",
      failed_to_resend_otp: "OTP እንደገና ማስተላለፍ አልተሳካም",
      having_trouble: "ችግር አጋጥሞዎታል?",
      check_your_network: "• የኔትዎርክ ግንኙነትዎን ያረጋግጡ",
      make_sure_correct_number: "• ትክክለኛውን ስልክ ቁጥር መግባትዎን ያረጋግጡ",
      success: "ተሳክቷል",

      create_account: "መለያ ፍጠር",
      join_travelease_community: "ወደ TravelEase ማህበረሰብ ይቀላቀሉ",
      enter_full_name: "ሙሉ ስምዎን ያስገቡ",
      enter_email: "ኢሜይል አድራሻዎን ያስገቡ",
      we_will_send_otp_verification: "ለማረጋገጫ OTP እንልካለን",
      incomplete_info: "ያልተሟላ መረጃ",
      please_fill_all_fields: "እባክዎ ሁሉንም መስኮች ይሙሉ",
      registration_successful: "ምዝገባ አልቋል",
      account_created_successfully: "መለያዎ በተሳካ ሁኔታ ተፈጥሯል",

      // My Tickets
      manage_your_bookings: "ቦቂንህዎን እና ጉዞዎችዎን ያስተዳድሩ",
      confirmed: "ተረጋግጧል",
      no_tickets_found: "ምንም ትኬት አልተገኘም",
      book_your_first_adventure: "ለመጀመር የመጀመሪያዎን ልምምድ ያቅዱ",
      view_details: "ዝርዝሮችን ይመልከቱ",

      // Profile
      guest_user: "እንግዳ ተጠቃሚ",
      not_logged_in: "አልገቡም",
      account_settings: "የመለያ ቅንብሮች",
      edit_profile: "መገለጫ አርትዕ",
      notifications: "ማሳወቂያዎች",
      payment_methods: "የክፍያ ዘዴዎች",
      help_support: "እርዳታ እና ድጋፍ",
      about_app: "ስለ አፕልኬሽኑ",
      preferences: "ቅድሚያ ምርጫዎች",
      dark_mode: "ጨለማ ሞድ",
      location_services: "የአካባቢ አገልግሎቶች",
      confirm_logout: "ውጣትን አረጋግጥ",
      are_you_sure_logout: "መውጣትዎን እርግጠኛ ነዎት?",
      all_rights_reserved: "ሁሉም መብቶች የተጠበቁ ናቸው",
      coming_soon: "በቅርብ ይመጣል",
      feature_coming_soon: "ይህ ባህሪ በቅርብ ይመጣል!",

      // Travel Detail
      travel_not_found: "የጉዞ መድረሻ አልተገኘም",
      reviews: "ግምገማዎች",
      trip_highlights: "የጉዞ ዋና ዋና ነገሮች",
      whats_included: "ምን ማን ይጨመራል",
      important_notes: "አስፈላጊ ማስታወሻዎች",
      booking_confirmation_note: "የቦቂንጅ ማረጋገጫ በ24 ሰዓታት ውስጥ ይላካል",
      cancellation_policy_note: "ከጉዞ በ48 ሰዓታት በፊት ነፃ ማስወገድ",
      total_per_person: "በአንድ ሰው ጠቅላላ",

      // Booking
      number_of_travelers: "የጉዞ አድራጊዎች ብዛት",
      select_travel_date: "የጉዞ ቀን ይምረጡ",
      price_summary: "የዋጋ ማጠቃለያ",
      traveler: "ጉዞ አድራጊ",
      payment_method: "የክፍያ ዘዴ",
      credit_debit_card: "ክሬዲት/ዲቢት ካርድ",
      by_continuing_you_agree_terms:
        "በመቀጠል የአገልግሎት ውሎች እና የግላዊነት ፖሊሲ ተቀባይ ነዎት።",
      confirm_booking: "ቦቂንጅ አረጋግጥ",
      processing: "በማቀነባበር ላይ...",
      select_date: "ቀን ይምረጡ",
      please_select_travel_date: "እባክዎ የጉዞ ቀን ይምረጡ",
      authentication_required: "ማረጋገጫ ያስፈልጋል",
      please_login_to_continue: "ቦቂንጅ ለማቀፍ እባክዎ ይግቡ",
      booking_successful: "ቦቂንጅ አልቋል!",
      your_trip_has_been_booked: "ጉዞዎ በተሳካ ሁኔታ ተቀምጧል",

      discover_your_next_adventure: "የበረከት ጉዞዎን ይጀምሩ",
      explore_amazing_destinations: "ጥንታዊ የእምነት ፈለግ ተከትለው ይጓዙ",
      popular: "ታዋቂ",
      adventure: "ልምምድ",
      cultural: "ባህላዊ",
      br: "ብር",

      bank_transfer: "በባንክ ማስተላለፍ",
      bank_transfer_description: "ወደ ባንክ ሂሳባችን ያስተላልፉ",
      card_payment_description: "በካርድዎ በደህና ይክፈሉ",
      back_to_payment_methods: "ወደ የመክፈያ መንገዶች ተመለስ",
      bank_transfer_instructions: "የባንክ ማስተላለፍ መመሪያዎች",
      bank_transfer_guide:
        "እባክዎ አጠቃላይ መጠኑን ከታች ባሉት ከአንዱ ባንክ ሂሳቦቻችን ይቀይሩ። ክፍያውን ካደረጉ በኋላ፣ የክፍያ ማረጋገጫዎን ለመጫን ከታች ያለውን ቁልፍ ይንኩ።",
      account_name: "የሂሳብ ስም",
      account_number: "የሂሳብ ቁጥር",
      branch: "ቅርንጫፍ",
      i_have_made_payment: "ክፍያ አድርጌአለሁ",
      confirm_payment: "ክፍያ ያረጋግጡ",
      upload_payment_proof: "እባክዎ የክፍያ ማረጋገጫዎን እንደ ማስረጃ የፍሰስ ስክሪን ወይም ፎቶ ይጫኑ።",
      reference_number: "የማጣቀሻ ቁጥር",
      enter_reference_number: "የግብይት ማጣቀሻ ቁጥር ያስገቡ",
      amount_paid: "የተከፈለ መጠን",
      enter_amount: "የተከፈለውን መጠን ያስገቡ",
      payment_screenshot: "የክፍያ ፍሰስ ስክሪን",
      choose_from_gallery: "ከጋሌሪ ምረጥ",
      take_photo: "ፎቶ አንስ",
      submit_payment: "ክፍያ አስገባ",
      payment_pending: "ክፍያ በመጠባበቅ ላይ",
      payment_pending_description:
        "ክፍያዎ እየተረጋገጠ ነው። ክፍያውን ከተረጋገጥን በኋላ የትዕዛዝ ማስታወሻዎን እናረጋግጣለን። ይህ ብዙውን ጊዜ 1-2 የስራ ሰዓታት ይፈጅሃል።",
      payment_proof: "የክፍያ ማስረጃ",
      simulate_confirmation: "ማረጋገጫ አሳይ (ለማሳያ)",
      payment_confirmed: "ክፍያ ተረጋግጧል!",
      payment_confirmed_description: "ክፍያዎ ተረጋግጧል እና የትዕዛዝ ማስታወሻዎ አሁን ተረጋግጧል።",
      payment_received: "ክፍያ ተቀብሎ ተረጋግጧል",
      itinerary_sent: "የጉዞ ዕቅድ ወደ ኢሜልዎ ተልኳል",
    },
  },
};

if (languageDetector) {
  i18n.use(languageDetector);
}
i18n.use(initReactI18next).init({
  resources,
  fallbackLng: "en",
  interpolation: {
    escapeValue: false,
  },
  compatibilityJSON: "v3",
});

export default i18n;
